[module]
name = "opencode"
version = "0.1.0"
author = "@ethereumdegen"
description = "AI coding agent â€” read, write, refactor code via OpenCode"
license = "MIT"

[service]
default_port = 9103
port_env_var = "OPENCODE_MODULE_PORT"
url_env_var = "OPENCODE_MODULE_URL"
has_dashboard = false
health_endpoint = "/rpc/status"

[service.env_vars]
OPENCODE_PORT = { required = false, description = "Port for opencode serve (default 4096)" }
OPENCODE_HOST = { required = false, description = "Hostname for opencode serve (default 127.0.0.1)" }
OPENCODE_PROJECT_DIR = { required = false, description = "Working directory for the coding agent" }
OPENCODE_SERVER_PASSWORD = { required = false, description = "HTTP basic auth password for opencode server" }

[skill]
content_file = "skill.md"

[[tools]]
name = "opencode_prompt"
description = "Send a coding task to the OpenCode AI agent. It can read files, write code, run commands, refactor, add tests, and debug."
group = "development"
rpc_method = "POST"
rpc_endpoint = "/rpc/prompt"

[tools.parameters.task]
type = "string"
description = "The coding task to perform (e.g. 'fix the compile error in auth.rs', 'add unit tests for the parser module', 'refactor the database layer to use connection pooling')"
required = true

[tools.parameters.project_path]
type = "string"
description = "Path to the project directory to work in"
required = false

[[tools]]
name = "opencode_sessions"
description = "List active OpenCode coding sessions"
group = "development"
rpc_method = "GET"
rpc_endpoint = "/rpc/sessions"
